<StoryFormScreen>:
    canvas.before:
        Color:
            rgba: 0.05, 0.05, 0.05, 1  # Fondo casi negro
        Rectangle:
            pos: self.pos
            size: self.size
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        
        BoxLayout:
            orientation: 'vertical'
            padding: dp(20) if is_mobile else dp(50)
            spacing: dp(15) if is_mobile else dp(20)
            size_hint_y: None
            height: self.minimum_height
            
            MDLabel:
                text: 'RELATA TU EXPERIENCIA PARANORMAL'
                halign: 'center'
                font_style: "H5" if is_mobile else "H4"
                theme_text_color: "Custom"
                text_color: 0.8, 0.1, 0.1, 1  # Rojo sangre
                size_hint_y: None
                height: self.texture_size[1]
                
            MDTextField:
                id: title
                hint_text: "Título de la historia"
                size_hint_x: 0.9 if is_mobile else 0.8
                pos_hint: {"center_x": 0.5}
                font_size: dp(16) if is_mobile else dp(14)
                size_hint_y: None
                height: dp(60)
                
            MDTextField:
                id: content
                hint_text: "Relata tu experiencia paranormal..."
                multiline: True
                size_hint_x: 0.9 if is_mobile else 0.8
                pos_hint: {"center_x": 0.5}
                font_size: dp(16) if is_mobile else dp(14)
                size_hint_y: None
                height: dp(150)
                
            MDTextField:
                id: category
                hint_text: "Tipo de fenómeno/Categoría"
                size_hint_x: 0.9 if is_mobile else 0.8
                pos_hint: {"center_x": 0.5}
                font_size: dp(16) if is_mobile else dp(14)
                size_hint_y: None
                height: dp(60)
                on_focus: if self.focus: app.root.get_screen('storyform').open_category_menu(self)
                
            MDRaisedButton:
                text: "PUBLICAR"
                pos_hint: {"center_x": 0.5}
                size_hint_x: 0.8 if is_mobile else 0.4
                height: dp(50) if is_mobile else dp(40)
                md_bg_color: 0.5, 0, 0, 1  # Rojo oscuro
                on_release: app.root.get_screen('storyform').publish_story()
                
            MDRaisedButton:
                text: 'VOLVER'
                pos_hint: {"center_x": 0.5}
                size_hint_x: 0.8 if is_mobile else 0.4
                height: dp(50) if is_mobile else dp(40)
                md_bg_color: 0.5, 0, 0, 1  # Rojo oscuro
                on_release: app.root.current = 'userpanel'